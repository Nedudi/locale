"use strict";var Locale=require("./locale"),Locales=require("./locales"),app=function(e,a){var c=e;return c instanceof Locales||(c=new Locales(c,a),c.index()),function(e,a,l){var o=new Locales(e.headers["accept-language"]),r=o.best(c);e.locale=String(r),e.rawLocale=r,l()}};app.Locales=Locales,app.Locale=Locale,module.exports=app;
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _slicedToArray=function(){function e(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),defaultLocaleString=function(){return process.env.LANG||"en_US"},Locale=function(){function e(t){if(_classCallCheck(this,e),!t)return null;var r=t.match(/[a-z]+/gi),n=_slicedToArray(r,2),a=n[0],o=n[1];this.code=t,this.language=a.toLowerCase();var i=[this.language];o&&(this.country=o.toUpperCase(),i.push(this.country)),this.normalized=i.join("_")}return _createClass(e,[{key:"serialize",value:function(){return this.language?this.code:null}}]),e}();Locale.prototype.toString=Locale.prototype.serialize,Locale.prototype.toJSON=Locale.prototype.serialize,Locale.default=new Locale(defaultLocaleString()),module.exports=Locale;
"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var _slicedToArray=function(){function e(e,r){var t=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(t.push(i.value),!r||t.length!==r);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),Locale=require("./locale"),Locales=function(){function e(r,t){_classCallCheck(this,e);var n=[];r&&("string"==typeof r||r instanceof String?n=r.split(","):r instanceof Array&&(n=r.slice()),n=n.map(function(e){if(!e)return null;var r=e.split(";"),t=_slicedToArray(r,2),n=t[0],a=t[1],o=new Locale(n.trim()),i=1;return a&&(i=a.slice(2)||0),o.score=i,o}).filter(function(e){return e instanceof Locale}).sort(function(e,r){return r.score-e.score})),this.elements=n,this._index=null,t&&(this.default=new Locale(t))}return _createClass(e,[{key:"index",value:function(){return this._index||(this._index={},this.elements.forEach(function(e,r){this._index[e.normalized]=r},this)),this._index}},{key:"best",value:function(r){var t=Locale.default;if(r&&r.default&&(t=r.default),t.defaulted=!0,!r)return this.elements[0]&&(t=this.elements[0],t.defaulted=!0),t;var n=!0,a=!1,o=void 0;try{for(var i,l=this.elements[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var u=i.value,s=e.appropriateIndex(r,u);if(null!==s)return function(e){var r=e;return r.defaulted=!1,r}(r.elements[s])}}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return t}},{key:"serialize",value:function(){return[].concat(_toConsumableArray(this.elements))}},{key:"toString",value:function(){return String(this.toJSON())}}],[{key:"appropriateIndex",value:function(e,r){var t=e.index(),n=t[r.normalized],a=t[r.language];if(void 0!==n)return n;if(void 0!==a)return a;var o=e.elements.findIndex(function(e){return e.language===r.language});return o>-1?o:null}}]),e}();Locales.prototype.toJSON=Locales.prototype.serialize,Locales.prototype.sort=Array.prototype.sort,Locales.prototype.push=Array.prototype.push,module.exports=Locales;
//# sourceMappingURL=locale.min.js.map
